name: Stale Issue & PR Management

permissions:
  issues: write
  pull-requests: write

on:
  schedule:
    - cron: "0 */6 * * *" # æ¯ 6 å°æ—¶è¿è¡Œä¸€æ¬¡
  workflow_dispatch: # å¯æ‰‹åŠ¨è¿è¡Œ

jobs:
  stale:
    runs-on: ubuntu-latest
    steps:
      - name: Mark and close stale issues & PRs
        uses: actions/stale@v8
        with:
          repo-token: ${{ secrets.GITHUB_TOKEN }}
          # è¿‡æœŸè§„åˆ™
          # 30 å¤©åæ ‡è®°ä¸º stale
          days-before-stale: 30
          # 7 å¤©åå…³é—­
          days-before-close: 7
          # å¤„ç† 200 ä¸ª PR å’Œ Issue
          operations-per-run: 200
          # è‡ªåŠ¨è¯„è®ºå†…å®¹
          stale-issue-message: |
            ğŸ‘€ è¯¥ Issue å·²ç» 30 å¤©æ²¡æœ‰ä»»ä½•æ›´æ–°å•¦
            å¦‚æœé—®é¢˜ä»ç„¶å­˜åœ¨ï¼Œè¯·å›å¤æ­¤è¯„è®ºï¼Œå¦åˆ™å°†åœ¨ 7 å¤©åè‡ªåŠ¨å…³é—­
          stale-pr-message: |
            ğŸ‘€ è¯¥ Pull Request å·²ç» 30 å¤©æ²¡æœ‰æ´»åŠ¨å•¦
            å¦‚ä»éœ€ç»§ç»­å¤„ç†ï¼Œè¯·å›å¤æ­¤è¯„è®ºï¼Œå¦åˆ™å°†åœ¨ 7 å¤©åè‡ªåŠ¨å…³é—­
          # ç»™è¿‡æœŸé¡¹æ·»åŠ çš„æ ‡ç­¾
          stale-issue-label: "è¿‡æœŸ"
          stale-pr-label: "è¿‡æœŸ"
          # ä¸ä¼šè¢«æ ‡è®°ä¸º stale çš„ PR å’Œ Issue
          exempt-draft-pr: true
          exempt-issue-labels: "BUG,é‡è¦,é«˜ä¼˜å…ˆçº§ P0,ä¸­ä¼˜å…ˆçº§ P1,éœ€è¦å¸®åŠ©"
          exempt-pr-labels: "BUG,é‡è¦,é«˜ä¼˜å…ˆçº§ P0,ä¸­ä¼˜å…ˆçº§ P1,éœ€è¦å¸®åŠ©"
